(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(46)},21:function(e,t,a){},22:function(e,t,a){},37:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(14),i=a.n(s),r=(a(21),a(2)),c=a(3),l=a(5),m=a(4),u=a(6),h=(a(22),a(9)),p=(a(37),a(10)),f=a.n(p),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={visible:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"openRenameModal",value:function(){this.setState({visible:!0})}},{key:"closeRenameModal",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("section",null,o.a.createElement("span",{className:"rename-text",onClick:function(){return e.openRenameModal()}},"Rename"),o.a.createElement(f.a,{visible:this.state.visible,width:"400",height:"300",effect:"fadeInUp",onClickAway:function(){return e.closeRenameModal()}},o.a.createElement("div",{className:"modal-form"},o.a.createElement("form",{onSubmit:function(t){return e.props.renameRoom(t,e.props.roomID)+e.closeRenameModal()}},o.a.createElement("h2",null,"Rename This Room"),o.a.createElement("input",{type:"text",className:"modal-input",placeholder:this.props.roomID.name,value:this.state.newRoomName,onChange:function(t){return e.props.handleChange(t)}}),o.a.createElement("button",{type:"submit"},"Rename")))))}}]),t}(n.Component),d=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={visible:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"openNewRoomModal",value:function(){this.setState({visible:!0})}},{key:"closeNewRoomModal",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("section",null,o.a.createElement("button",{type:"submit",onClick:function(){return e.openNewRoomModal()}},"Create New Room"),o.a.createElement(f.a,{visible:this.state.visible,width:"400",height:"300",effect:"fadeInUp",onClickAway:function(){return e.closeNewRoomModal()}},o.a.createElement("div",{className:"modal-form"},o.a.createElement("form",{onSubmit:function(t){return e.props.createRoom(t)+e.closeNewRoomModal()}},o.a.createElement("h2",null,"Create A New Room"),o.a.createElement("input",{type:"text",className:"modal-input",placeholder:"New Room Name",onChange:function(t){return e.props.handleChange(t)}}),o.a.createElement("button",{type:"submit"},"Create!")))))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={rooms:[],newRoomName:""},a.roomsRef=a.props.firebase.database().ref("rooms"),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.roomsRef.on("child_added",function(t){var a=t.val();a.key=t.key,e.setState({rooms:e.state.rooms.concat(a)})}),this.roomsRef.on("child_removed",function(t){var a=t.val();a.key=t.key,e.setState({rooms:e.state.rooms.filter(function(e){return e.key!==a.key})}),console.log("Child_removed ran")}),this.roomsRef.on("child_changed",function(t){var a=t.val();a.key=t.key,e.setState({rooms:e.state.rooms.map(function(e){return e.key===a.key?a:e})}),console.log("Child_changed ran")})}},{key:"componentDidUpdate",value:function(){console.log(this.state)}},{key:"createRoom",value:function(e){e.preventDefault(),this.state.newRoomName&&(this.roomsRef.push({name:this.state.newRoomName}),this.setState({newRoomName:""}))}},{key:"handleChange",value:function(e){this.setState({newRoomName:e.target.value}),console.log(this.state.newRoomName)}},{key:"deleteRoom",value:function(e,t){e.preventDefault(),this.roomsRef.child(t.key).remove(),this.props.setActiveRoom("")}},{key:"renameRoom",value:function(e,t){e.preventDefault(),this.roomsRef.child(t.key).update({name:this.state.newRoomName}),this.setState({newRoomName:""})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"RoomList-section"},o.a.createElement("h1",null,"Script[it]"),o.a.createElement(d,{newRoomName:this.state.newRoomName,handleChange:this.handleChange.bind(this),createRoom:this.createRoom.bind(this)}),o.a.createElement("div",{className:"new-room-modal"}),this.state.rooms.map(function(t,a){return o.a.createElement("div",{key:a},o.a.createElement("div",{className:"Room-name",onClick:function(a){return e.props.setActiveRoom(t)}},t.name," "),o.a.createElement("div",{className:"delete-rename"},o.a.createElement("span",{className:"Delete-text",onClick:function(a){window.confirm("Are you sure you wish to delete this room?")&&e.deleteRoom(a,t)}},"Delete"),o.a.createElement("span",{className:"inline-block"}," / "),o.a.createElement("div",{className:"rename-room-modal"},o.a.createElement(v,{newRoomName:e.state.newRoomName,handleChange:e.handleChange.bind(e),renameRoom:e.renameRoom.bind(e),roomID:t}))))}))}}]),t}(n.Component),g=(a(43),a(15)),R=a.n(g),y=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={messages:[],newMessage:""},a.messagesRef=a.props.firebase.database().ref("messages"),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.messagesRef.on("child_added",function(t){var a=t.val();a.key=t.key,e.setState({messages:e.state.messages.concat(a)})})}},{key:"createMessage",value:function(e){e.preventDefault(),this.state.messages&&(this.messagesRef.push({content:this.state.newMessage,roomID:this.props.activeRoomID.key,sentAt:this.props.firebase.database.ServerValue.TIMESTAMP,username:this.props.user?this.props.user.displayName:"Guest"}),this.setState({newMessage:""}))}},{key:"handleChange",value:function(e){this.setState({newMessage:e.target.value})}},{key:"showMessageBar",value:function(){var e=this;return this.props.activeRoomID.name!==this.props.activeRoomID.key?o.a.createElement("form",{onSubmit:function(t){return e.createMessage(t)}},o.a.createElement("input",{type:"text",name:"new-message",placeholder:"Write your message here...",value:this.state.newMessage,onChange:function(t){return e.handleChange(t)}}),o.a.createElement("button",{className:"Message-Button",type:"submit"},"Send")):void 0}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"Message-List"},o.a.createElement("div",{className:"MessagesInRoom"},o.a.createElement("h2",null,this.props.activeRoomID?this.props.activeRoomID.name:"Choose a Room"),this.state.messages.filter(function(t){return t.roomID===e.props.activeRoomID.key}).map(function(e){return o.a.createElement("ul",{className:"Message-content",key:e.key},o.a.createElement("li",null,o.a.createElement("b",null,e.username,":")," ",e.content," ",o.a.createElement("span",{className:"message-date"},o.a.createElement(R.a,{date:e.sentAt}))))})),o.a.createElement("div",{className:"CreateNewMessage"},this.showMessageBar()))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).usernameRef=a.props.firebase.database().ref("username"),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth().onAuthStateChanged(function(t){e.props.setUser(t)})}},{key:"componentWillUnmount",value:function(){this.props.setUser=null}},{key:"googleSignin",value:function(){var e=new this.props.firebase.auth.GoogleAuthProvider;this.props.firebase.auth().signInWithPopup(e).then(function(e){var t=e.credential.accessToken,a=e.user;console.log(t),console.log(a)})}},{key:"googleSignout",value:function(){this.props.firebase.auth().signOut().then(function(){console.log("Signout Succesfull")},function(e){console.log("Signout Failed")})}},{key:"showButton",value:function(e){var t=this;return null===this.props.user?o.a.createElement("button",{className:"sign-in",onClick:function(){return t.googleSignin(t)}},"Sign In"):o.a.createElement("button",{className:"sign-out",onClick:function(){return t.googleSignout(t)}},"Sign Out")}},{key:"render",value:function(){return o.a.createElement("div",{className:"sign-in-out"},this.showButton(),o.a.createElement("h4",null,"Hello, ",this.props.user?this.props.user.displayName:"Guest"))}}]),t}(n.Component);h.initializeApp({apiKey:"AIzaSyDvi7hoqxwVeCwFOEpzh5oSP09f0Ryk07Q",authDomain:"c-bloc-chat.firebaseapp.com",databaseURL:"https://c-bloc-chat.firebaseio.com",projectId:"c-bloc-chat",storageBucket:"c-bloc-chat.appspot.com",messagingSenderId:"271758643817"});var w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={activeRoom:"",user:null,message:"",visible:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setActiveRoom",value:function(e){this.setState({activeRoom:e}),console.log(this.state.activeRoom)}},{key:"setUser",value:function(e){this.setState({user:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",null,o.a.createElement(k,{firebase:h,user:this.state.user,setUser:function(t){return e.setUser(t)}})),o.a.createElement("aside",{className:"room-list"},o.a.createElement(b,{firebase:h,setActiveRoom:this.setActiveRoom.bind(this),activeRoomID:this.state.activeRoom})),o.a.createElement("main",{className:"message-list"},o.a.createElement(y,{firebase:h,activeRoomID:this.state.activeRoom,user:this.state.user})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.76f1aad6.chunk.js.map